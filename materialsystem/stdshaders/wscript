#! /usr/bin/env python
# encoding: utf-8

from waflib import Utils
import os

top = '.'
PROJECT_NAME = 'stdshader_dx9'

def options(opt):
	# stub
	return

def configure(conf):
	conf.env.append_unique('DEFINES',[
		'STDSHADER_DX9_DLL_EXPORT',
		'FAST_MATERIALVAR_ACCESS'
	])

def build(bld):
	stdshader_dx9_20 = [
		'AccumBuff4Sample_ps2x.fxc',
		'accumbuff5sample_ps2x.fxc',
		'aftershock_ps2x.fxc',
		'aftershock_vs20.fxc',
		'appchooser360movie_ps2x.fxc',
		'bik_ps11.psh',
		'bik_ps14.psh',
		'bik_ps2x.fxc',
		'bik_vs11.vsh',
		'bik_vs20.fxc',
		'Bloom_ps2x.fxc',
		'bloomadd_ps11.fxc',
		'bloomadd_ps2x.fxc',
		'BlurFilter_ps11.psh',
		'BlurFilter_ps2x.fxc',
		'BlurFilter_vs11.fxc',
		'BlurFilter_vs20.fxc',
		'BufferClearObeyStencil_ps11.psh',
		'bufferclearobeystencil_ps2x.fxc',
		'BufferClearObeyStencil_vs11.vsh',
		'bufferclearobeystencil_vs20.fxc',
		'BumpmappedEnvmap.psh',
		'BumpmappedEnvmap.vsh',
		'BumpmappedLightmap.vsh',
		'BumpmappedLightmap_OverBright2.psh',
		'bumpmappedlightmap_vs11.fxc',
		'Cable.psh',
		'Cable.vsh',
		'cable_ps2x.fxc',
		'cable_vs20.fxc',
		'cloak_blended_pass_ps2x.fxc',
		'cloak_blended_pass_vs20.fxc',
		'cloak_blended_pass_dx8_ps11.psh',
		'cloak_blended_pass_dx8_vs11.vsh',
		'cloak_ps2x.fxc',
		'cloak_vs20.fxc',
		'cloud_ps11.psh',
		'cloud_vs11.vsh',
		'cloud_ps20.fxc',
		'cloud_vs20.fxc',
		'colorcorrection_ps2x.fxc',
		'compositor_ps2x.fxc',
		'compositor_vs20.fxc',
		'constant_color_ps2x.fxc',
		'copy_fp_rt_ps2x.fxc',
		'color_projection_ps2x.fxc',
		'color_projection_vs20.fxc',
		'core_ps11.psh',
		'core_ps2x.fxc',
		'core_vs11.fxc',
		'core_vs20.fxc',
		'DebugDrawDepth_ps2x.fxc',
		'DebugDrawDepth_vs20.fxc',
		'DebugDrawEnvmapMask_ps2x.fxc',
		'DebugDrawEnvmapMask_vs20.fxc',
		'debugluxel_ps2x.fxc',
		'debugluxel_vs20.fxc',
		'debugmrttexture_ps2x.fxc',
		'debugmrttexture_vs20.fxc',
		'debugtangentspace.vsh',
		'debugtangentspace_vs11.fxc',
		'debugtangentspace_vs20.fxc',
		'DecalBaseTimesLightmapAlphaBlendSelfIllum1_ps11.psh',
		'DecalBaseTimesLightmapAlphaBlendSelfIllum2_ps11.psh',
		'decalbasetimeslightmapalphablendselfillum2_ps2x.fxc',
		'decalmodulate_ps2x.fxc',
		'depthwrite_ps2x.fxc',
		'depthwrite_vs20.fxc',
		'depthtodestalpha_vs20.fxc',
		'depthtodestalpha_ps20b.fxc',
		'Downsample_nohdr_ps11.psh',
		'Downsample_nohdr_ps2x.fxc',
		'Downsample_ps2x.fxc',
		'Downsample_vs11.fxc',
		'Downsample_vs20.fxc',
		'emissive_scroll_blended_pass_dx8_ps11.psh',
		'emissive_scroll_blended_pass_dx8_vs11.vsh',
		'emissive_scroll_blended_pass_ps2x.fxc',
		'emissive_scroll_blended_pass_vs20.fxc',
		'Engine_Post_ps2x.fxc',
		'example_model_ps20b.fxc',
		'example_model_vs20.fxc',
		'eye_refract_ps2x.fxc',
		'eye_refract_vs20.fxc',
		'Eyes.psh',
		'eyes.vsh',
		'eyes_ps2x.fxc',
		'Eyes_vs20.fxc',
		'eyes_flashlight_ps11.fxc',
		'eyes_flashlight_vs11.vsh',
		'eyes_flashlight_ps2x.fxc',
		'eyes_flashlight_vs20.fxc',
		'eyeglint_vs20.fxc',
		'eyeglint_ps2x.fxc',
		'Eyes_Overbright2.psh',
		'fillrate.psh',
		'fillrate.vsh',
		'fillrate_ps11.fxc',
		'fillrate_vs11.fxc',
		'fillrate_ps2x.fxc',
		'fillrate_vs20.fxc',
		'filmdust_ps11.fxc',
		'filmdust_ps20.fxc',
		'filmgrain_ps11.fxc',
		'filmgrain_ps20.fxc',
		'filmgrain_vs20.fxc',
		'flashlight_ps11.fxc',
		'flashlight_ps2x.fxc',
		'flesh_interior_blended_pass_dx8_ps11.psh',
		'flesh_interior_blended_pass_dx8_vs11.vsh',
		'flesh_interior_blended_pass_ps2x.fxc',
		'flesh_interior_blended_pass_vs20.fxc',
		'floatcombine_autoexpose_ps2x.fxc',
		'floatcombine_ps2x.fxc',
		'floattoscreen_notonemap_ps2x.fxc',
		'floattoscreen_ps2x.fxc',
		'floattoscreen_vanilla_ps2x.fxc',
		'haloadd_ps2x.fxc',
		'haloadd1d_ps2x.fxc',
		'haloaddoutline_ps2x.fxc',
		'HDRCombineTo16Bit_ps2x.fxc',
		'HDRCombineTo16Bit_vs20.fxc',
		'HDRSelectRange_ps2x.fxc',
		'HDRSelectRange_vs20.fxc',
		'hsl_filmgrain_pass1_ps2x.fxc',
		'hsl_filmgrain_pass2_ps2x.fxc',
		'hsv_ps2x.fxc',
		'IntroScreenSpaceEffect_ps11.fxc',
		'IntroScreenSpaceEffect_ps2x.fxc',
		'JellyFish.psh',
		'JellyFish.vsh',
		'LightingOnly.vsh',
		'LightmappedGeneric.psh',
		'LightmappedGeneric_AddBaseAlphaMaskedEnvMap.psh',
		'LightmappedGeneric_AddEnvMapMaskNoTexture.psh',
		'LightmappedGeneric_AddEnvMapNoTexture.psh',
		'LightmappedGeneric_BaseAlphaMaskedEnvMapV2.psh',
		'LightmappedGeneric_BaseTexture.psh',
		'LightmappedGeneric_BaseTexture.vsh',
		'lightmappedgeneric_basetextureblend.psh',
		'LightmappedGeneric_BaseTextureBlend.vsh',
		'LightmappedGeneric_BumpmappedEnvmap.psh',
		'LightmappedGeneric_BumpmappedEnvmap.vsh',
		'LightmappedGeneric_BumpmappedEnvmap_ps14.psh',
		'LightmappedGeneric_BumpmappedEnvmap_ps14.vsh',
		'LightmappedGeneric_BumpmappedLightmap.psh',
		'LightmappedGeneric_SSBumpmappedLightmap.psh',
		'LightmappedGeneric_BumpmappedLightmap.vsh',
		'LightmappedGeneric_BumpmappedLightmap_base_ps14.psh',
		'LightmappedGeneric_BumpmappedLightmap_base_ps14.vsh',
		'LightmappedGeneric_BumpmappedLightmap_blend_ps14.psh',
		'LightmappedGeneric_BumpmappedLightmap_blend_ps14.vsh',
		'LightmappedGeneric_Decal.psh',
		'LightmappedGeneric_Decal.vsh',
		'lightmappedgeneric_decal_ps2x.fxc',
		'lightmappedgeneric_decal_vs20.fxc',
		'LightmappedGeneric_Detail.psh',
		'LightmappedGeneric_DetailNoTexture.psh',
		'LightmappedGeneric_DetailSelfIlluminated.psh',
		'LightmappedGeneric_EnvMapNoTexture.psh',
		'LightmappedGeneric_EnvMapV2.psh',
		'lightmappedgeneric_flashlight_vs11.fxc',
		'lightmappedgeneric_flashlight_vs20.fxc',
		'LightmappedGeneric_LightingOnly.vsh',
		'LightmappedGeneric_LightingOnly_Overbright2.psh',
		'lightmappedgeneric_lightingonly_overbright2_ps11.fxc',
		'lightmappedgeneric_lightingonly_vs11.fxc',
		'LightmappedGeneric_MaskedEnvMapNoTexture.psh',
		'LightmappedGeneric_MaskedEnvMapV2.psh',
		'LightmappedGeneric_MultiplyByLighting.psh',
		'LightmappedGeneric_MultiplyByLightingNoTexture.psh',
		'LightmappedGeneric_MultiplyByLightingSelfIllum.psh',
		'LightmappedGeneric_NoTexture.psh',
		'lightmappedgeneric_ps2x.fxc',
		'LightmappedGeneric_SelfIlluminated.psh',
		'LightmappedGeneric_SelfIlluminatedEnvMapV2.psh',
		'LightmappedGeneric_SelfIlluminatedMaskedEnvMapV2.psh',
		'lightmappedgeneric_vs11.vsh',
		'lightmappedgeneric_vs20.fxc',
		'lightmappedreflective_ps2x.fxc',
		'lightmappedreflective_vs20.fxc',
		'LightmappedTranslucentTexture.psh',
		'lpreview_output_ps2x.fxc',
		'lpreview1_ps2x.fxc',
		'luminance_compare_ps2x.fxc',
		'Modulate_ps11.psh',
		'modulate_ps2x.fxc',
		'MonitorScreen.psh',
		'monitorscreen_ps2x.fxc',
		'motion_blur_vs20.fxc',
		'motion_blur_ps2x.fxc',
		'overlay_fit_ps11.psh',
		'overlay_fit_vs11.vsh',
		'particlesphere_ps11.fxc',
		'particlesphere_vs11.fxc',
		'particlesphere_ps2x.fxc',
		'particlesphere_vs20.fxc',
		'pbr_ps20b.fxc',
		'pbr_vs20b.fxc',
		'portal_ps11.fxc',
		'portal_vs11.fxc',
		'portal_ps2x.fxc',
		'portal_vs20.fxc',
		'portalstaticoverlay_ps11.fxc',
		'portalstaticoverlay_vs11.fxc',
		'portalstaticoverlay_ps2x.fxc',
		'portalstaticoverlay_vs20.fxc',
		'portal_refract_vs11.fxc',
		'portal_refract_ps11.fxc',
		'portal_refract_vs20.fxc',
		'portal_refract_ps2x.fxc',
		'predator.psh',
		'predator.vsh',
		'pyro_vision_ps2x.fxc',
		'pyro_vision_vs20.fxc',
		'Refract_model_vs11.vsh',
		'Refract_ps11.psh',
		'refract_ps2x.fxc',
		'Refract_vs20.fxc',
		'Refract_world_vs11.vsh',
		'rendertargetblit_ps2x.fxc',
		'rendertargetblit_vs20.fxc',
		'sample4x4_blend_ps2x.fxc',
		'sample4x4_ps2x.fxc',
		'sample4x4delog_ps2x.fxc',
		'sample4x4log_ps2x.fxc',
		'sample4x4maxmin_ps2x.fxc',
		'ScreenSpaceEffect.vsh',
		'screenspaceeffect_vs11.fxc',
		'screenspaceeffect_vs20.fxc',
		'sfm_combine_vs20.fxc',
		'sfm_integercombine_ps2x.fxc',
		'Shadow.psh',
		'shadow_ps14.psh',
		'shadow_vs14.vsh',
		'shadow_ps2x.fxc',
		'shadow_vs20.fxc',
		'ShadowBuildTexture.psh',
		'shadowbuildtexture_ps2x.fxc',
		'ShadowModel.psh',
		'ShadowModel.vsh',
		'shadowmodel_ps20.fxc',
		'shadowmodel_vs20.fxc',
		'ShatteredGlass.psh',
		'ShatteredGlass.vsh',
		'ShatteredGlass_EnvMap.psh',
		'ShatteredGlass_EnvMap.vsh',
		'ShatteredGlass_EnvMapSphere.vsh',
		'ShatteredGlass_ps2x.fxc',
		'ShatteredGlass_vs20.fxc',
		'DebugTextureView_vs20.fxc',
		'DebugTextureView_ps2x.fxc',
		'showz_ps2x.fxc',
		'showz_vs20.fxc',
		'skin_ps20b.fxc',
		'skin_vs20.fxc',
		'sky_ps2x.fxc',
		'sky_vs20.fxc',
		'sky_hdr_compressed_ps2x.fxc',
		'sky_hdr_compressed_rgbs_ps2x.fxc',
		'splinecard_vsxx.fxc',
		'sprite_ps11.psh',
		'sprite_vs11.vsh',
		'sprite_ps2x.fxc',
		'sprite_vs20.fxc',
		'spritecard_ps2x.fxc',
		'spritecard_vsxx.fxc',
		'spritecard_ps11.fxc',
		'SpriteRenderNormal.psh',
		'SpriteRenderTransAdd.psh',
		'SpriteRenderTransColor.psh',
		'Teeth.vsh',
		'teeth_ps2x.fxc',
		'teeth_vs20.fxc',
		'teeth_bump_ps2x.fxc',
		'teeth_bump_vs20.fxc',
		'teeth_flashlight_ps2x.fxc',
		'teeth_flashlight_vs20.fxc',
		'TreeLeaf_ps2x.fxc',
		'TreeLeaf_vs20.fxc',
		'UnlitGeneric.psh',
		'unlitgeneric_basetimesdetail.psh',
		'UnlitGeneric_BaseAlphaMaskedEnvMap.psh',
		'UnlitGeneric_Detail.psh',
		'UnlitGeneric_DetailBaseAlphaMaskedEnvMap.psh',
		'UnlitGeneric_DetailEnvMap.psh',
		'UnlitGeneric_DetailEnvMapMask.psh',
		'UnlitGeneric_DetailEnvMapMaskNoTexture.psh',
		'UnlitGeneric_DetailEnvMapNoTexture.psh',
		'UnlitGeneric_DetailNoTexture.psh',
		'UnlitGeneric_EnvMap.psh',
		'UnlitGeneric_EnvMapMask.psh',
		'UnlitGeneric_EnvMapMaskNoTexture.psh',
		'UnlitGeneric_EnvMapNoTexture.psh',
		'UnlitGeneric_LightingOnly.vsh',
		'UnlitGeneric_NoTexture.psh',
		'unlitgeneric_notexture_ps11.fxc',
		'unlitgeneric_notexture_ps2x.fxc',
		'unlitgeneric_ps2x.fxc',
		'alphadist_ps11.fxc',
		'UnlitGeneric_MaskBaseByDetailAlpha_ps11.fxc',
		'unlitgeneric_vs11.vsh',
		'unlitgeneric_vs20.fxc',
		'UnlitTwoTexture.vsh',
		'UnlitTwoTexture.psh',
		'unlittwotexture_ps2x.fxc',
		'unlittwotexture_vs20.fxc',
		'vertexlit_and_unlit_generic_bump_ps2x.fxc',
		'vertexlit_and_unlit_generic_bump_vs20.fxc',
		'vertexlit_and_unlit_generic_ps2x.fxc',
		'vertexlit_and_unlit_generic_vs20.fxc',
		'VertexLitGeneric.psh',
		'VertexLitGeneric_BaseAlphaMaskedEnvMapV2.psh',
		'VertexLitGeneric_BlendTint.psh',
		'VertexLitGeneric_Detail.psh',
		'VertexLitGeneric_Detail_LerpBase.psh',
		'VertexLitGeneric_Detail_additive.psh',
		'VertexLitGeneric_Detail_additive_selfillum.psh',
		'VertexLitGeneric_DetailBaseAlphaMaskedEnvMapV2.psh',
		'VertexLitGeneric_DetailEnvMapV2.psh',
		'VertexLitGeneric_DetailMaskedEnvMapV2.psh',
		'VertexLitGeneric_DetailNoTexture.psh',
		'VertexLitGeneric_DetailSelfIlluminated.psh',
		'VertexLitGeneric_DetailSelfIlluminatedEnvMapV2.psh',
		'VertexLitGeneric_DetailSelfIlluminatedMaskedEnvMapV2.psh',
		'VertexLitGeneric_EnvMapNoTexture.psh',
		'VertexLitGeneric_EnvmappedBumpmap_NoLighting.vsh',
		'VertexLitGeneric_EnvmappedBumpmap_NoLighting_ps14.vsh',
		'VertexLitGeneric_EnvmappedBumpmapV2.psh',
		'VertexLitGeneric_EnvmappedBumpmapV2_MultByAlpha.psh',
		'VertexLitGeneric_EnvmappedBumpmapV2_MultByAlpha_ps14.psh',
		'VertexLitGeneric_EnvmappedBumpmapV2_ps14.psh',
		'VertexLitGeneric_EnvMapV2.psh',
		'vertexlitgeneric_flashlight_vs11.vsh',
		'vertexlitgeneric_lightingonly_overbright2.psh',
		'vertexlitgeneric_lightingonly_overbright2_ps11.fxc',
		'VertexLitGeneric_MaskedEnvMapNoTexture.psh',
		'VertexLitGeneric_MaskedEnvMapV2.psh',
		'VertexLitGeneric_NoTexture.psh',
		'VertexLitGeneric_SelfIlluminated.psh',
		'VertexLitGeneric_SelfIlluminatedEnvMapV2.psh',
		'VertexLitGeneric_SelfIlluminatedMaskedEnvMapV2.psh',
		'VertexLitGeneric_SelfIllumOnly.vsh',
		'vertexlitgeneric_vs11.vsh',
		'VertexLitTexture.psh',
		'VertexLitTexture_Overbright2.psh',
		'volume_clouds_vs20.fxc',
		'volume_clouds_ps2x.fxc',
		'vortwarp_ps11.psh',
		'vortwarp_ps2x.fxc',
		'vortwarp_vs11.vsh',
		'vortwarp_vs20.fxc',
		'vr_distort_hud_ps2x.fxc',
		'vr_distort_hud_vs20.fxc',
		'vr_distort_texture_ps2x.fxc',
		'vr_distort_texture_vs20.fxc',
		'warp_ps2x.fxc',
		'warp_vs20.fxc',
		'Water_vs11.vsh',
		'Water_ps14.psh',
		'Water_ps14.vsh',
		'water_ps2x.fxc',
		'Water_vs20.fxc',
		'WaterCheap_ps11.psh',
		'WaterCheap_vs11.vsh',
		'WaterCheap_ps14.psh',
		'WaterCheap_vs14.vsh',
		'WaterCheap_ps2x.fxc',
		'WaterCheap_vs20.fxc',
		'WaterCheapFresnel_ps14.psh',
		'WaterCheapFresnelOpaque_ps14.psh',
		'WaterCheapNoFresnel_ps11.psh',
		'WaterCheapNoFresnelOpaque_ps11.psh',
		'WaterCheapOpaque_ps11.psh',
		'WaterCheapOpaque_ps14.psh',
		'WaterCheapPerVertexFresnel_vs11.vsh',
		'WaterReflect_ps11.psh',
		'WaterRefract_ps11.psh',
		'WaterRefractFresnel_ps11.psh',
		'weapon_sheen_pass_ps2x.fxc',
		'weapon_sheen_pass_vs20.fxc',
		'white.psh',
		'white_ps2x.fxc',
		'windowimposter_ps11.fxc',
		'windowimposter_vs11.fxc',
		'windowimposter_ps2x.fxc',
		'windowimposter_vs20.fxc',
		'WorldTexture.psh',
		'WorldTwoTextureBlend.psh',
		'WorldTwoTextureBlend_DetailAlpha.psh',
		'worldtwotextureblend_ps2x.fxc',
		'WorldTwoTextureBlend_SelfIlluminated.psh',
		'WorldVertexAlpha.psh',
		'WorldVertexAlpha.vsh',
		'WorldVertexAlpha_ps2x.fxc',
		'WorldVertexTransition.psh',
		'WorldVertexTransition.vsh',
		'WorldVertexTransition_ps14.psh',
		'WorldVertexTransition_vs14.vsh',
		'WorldVertexTransition_Seamless.psh',
		'WorldVertexTransition_Seamless.vsh',
		'WorldVertexTransition_BlendBase2.psh',
		'WorldVertexTransition_Editor.psh',
		'writevertexalphatodestalpha_ps11.fxc',
		'writevertexalphatodestalpha_vs11.fxc',
		'writez.vsh',
		'writez_vs20.fxc',
		'yuv.psh',
		'defdecalmodulate_vs20.fxc',
		'defdecalmodulate_ps2x.fxc'
	]
	bld(
		source = stdshader_dx9_20,
		target = 'stdshader_dx9_20',
		features = 'fxc',
		subsystem = bld.env.MSVC_SUBSYSTEM,
		idx      = bld.get_taskgen_count()
	)

	stdshader_dx9_30 = [
		'cloak_vs20.fxc',
		'cloak_ps2x.fxc',
		'cloak_blended_pass_vs20.fxc',
		'cloak_blended_pass_ps2x.fxc',
		'debugmorphaccumulator_vs30.fxc',
		'debugmorphaccumulator_ps30.fxc',
		'decalmodulate_ps2x.fxc',
		'emissive_scroll_blended_pass_vs20.fxc',
		'emissive_scroll_blended_pass_ps2x.fxc',
		'eye_refract_vs20.fxc',
		'eye_refract_ps2x.fxc',
		'Eyes_vs20.fxc',
		'eyes_ps2x.fxc',
		'eyes_flashlight_vs20.fxc',
		'eyes_flashlight_ps2x.fxc',
		'morphaccumulate_vs30.fxc',
		'morphaccumulate_ps30.fxc',
		'morphweight_vs30.fxc',
		'morphweight_ps30.fxc',
		'pbr_ps30.fxc',
		'pbr_vs30.fxc',
		'pyro_vision_ps2x.fxc',
		'pyro_vision_vs20.fxc',
		'skin_vs20.fxc',
		'skin_ps20b.fxc',
		'teeth_vs20.fxc',
		'teeth_ps2x.fxc',
		'teeth_bump_vs20.fxc',
		'teeth_bump_ps2x.fxc',
		'teeth_flashlight_vs20.fxc',
		'teeth_flashlight_ps2x.fxc',
		'vertexlit_and_unlit_generic_vs20.fxc',
		'vertexlit_and_unlit_generic_ps2x.fxc',
		'vertexlit_and_unlit_generic_bump_vs20.fxc',
		'vertexlit_and_unlit_generic_bump_ps2x.fxc',
		'vortwarp_vs20.fxc',
		'vortwarp_ps2x.fxc',
		'vr_distort_hud_ps2x.fxc',
		'vr_distort_hud_vs20.fxc',
		'vr_distort_texture_ps2x.fxc',
		'vr_distort_texture_vs20.fxc',
		'warp_ps2x.fxc',
		'warp_vs20.fxc',
		'weapon_sheen_pass_vs20.fxc',
		'weapon_sheen_pass_ps2x.fxc',
		'gbuffer_vs30.fxc',
		'gbuffer_ps30.fxc',
		'gbuffer_defshading_ps30.fxc',
		'shadowpass_vs30.fxc',
		'shadowpass_ps30.fxc',
		'composite_vs30.fxc',
		'composite_ps30.fxc',
		'defconstruct_vs30.fxc',
		'decalmodulate_vs20.fxc',
		'decalmodulate_ps2x.fxc',
		'lightingpass_global_ps30.fxc',
		'lightingpass_point_ps30.fxc',
		'lightingpass_spot_ps30.fxc',
		'screenspace_shading_ps30.fxc',
		'screenspace_combine_ps30.fxc',
		'volume_blend_ps30.fxc',
		'volume_prepass_vs30.fxc',
		'volume_prepass_ps30.fxc',
		'volumpass_point_ps30.fxc',
		'volumpass_spot_ps30.fxc',
		'radiosity_gen_global_ps30.fxc',
		'radiosity_gen_vs30.fxc',
		'radiosity_propagate_ps30.fxc',
		'radiosity_propagate_vs30.fxc',
		'radiosity_blend_ps30.fxc',
		'screenspace_vs30.fxc',
		'gaussianblur_6_ps30.fxc',
		'debug_shadow_ortho_ps30.fxc',
		'debug_lighting_ctrl_ps30.fxc',
		'debug_radiosity_grid_ps30.fxc',
		'debug_radiosity_grid_vs30.fxc',
		'depthwrite_ps2x.fxc',
		'depthwrite_vs20.fxc',
		'defdecalmodulate_vs20.fxc',
		'defdecalmodulate_ps2x.fxc'
	]
	bld(
		source = stdshader_dx9_30,
		target = 'stdshader_dx9_30',
		features = 'fxc',
		subsystem = bld.env.MSVC_SUBSYSTEM,
		idx      = bld.get_taskgen_count()
	).FORCE_30 = True # Hack around Valve putting 3.0 directives in 2.0 files.

	source = [
		'aftershock.cpp',
		'aftershock_helper.cpp',
		'AccumBuff4Sample.cpp',
		'accumbuff5sample.cpp',
		'BaseVSShader.cpp',
		'bik_dx90.cpp',
		'Bloom.cpp',
		'BlurFilterX.cpp',
		'BlurFilterY.cpp',
		'BufferClearObeyStencil_dx9.cpp',
		'cable_dx9.cpp',
		'cloak.cpp',
		'cloak_blended_pass_helper.cpp',
		'cloak_dx9_helper.cpp',
		'cloud_dx9.cpp',
		'colorcorrection.cpp',
		'compositor.cpp',
		'core_dx9.cpp',
		'color_projection.cpp',
		'debugmrttexture.cpp',
		'DebugTextureView.cpp',
		'DecalBaseTimesLightmapAlphaBlendSelfIllum_dx9.cpp',
		'DecalModulate_dx9.cpp',
		'depthwrite.cpp',
		'Downsample.cpp',
		'downsample_nohdr.cpp',
		'Engine_Post_dx9.cpp',
		'emissive_scroll_blended_pass_helper.cpp',
		'eye_refract.cpp',
		'eye_refract_helper.cpp',
		'eyes_dx8_dx9_helper.cpp',
		'eyes_dx9.cpp',
		'eyeglint_dx9.cpp',
		'filmdust_dx8_dx9.cpp',
		'filmgrain_dx8_dx9.cpp',
		'flesh_interior_blended_pass_helper.cpp',
		'floatcombine.cpp',
		'floatcombine_autoexpose.cpp',
		'floattoscreen.cpp',
		'floattoscreen_vanilla.cpp',
		'HDRCombineTo16Bit.cpp',
		'HDRSelectRange.cpp',
		'hsl_filmgrain_pass1.cpp',
		'hsl_filmgrain_pass2.cpp',
		'hsv.cpp',
		'introscreenspaceeffect.cpp',
		'lightmappedgeneric_dx9.cpp',
		'lightmappedgeneric_dx9_helper.cpp',
		'lightmappedreflective.cpp',
		'modulate_dx9.cpp',
		'MonitorScreen_dx9.cpp',
		'motion_blur_dx9.cpp',
		'occlusion_dx9.cpp',
		'particlelitgeneric_dx9.cpp',
		'particlelitgeneric_dx9_helper.cpp',
		'particlesphere_dx9.cpp',
		'pbr_dx9.cpp',
		'portal.cpp',
		'portalstaticoverlay.cpp',
		'portal_refract.cpp',
		'portal_refract_helper.cpp',
		'pyro_vision.cpp',
		'refract.cpp',
		'refract_dx9_helper.cpp',
		'sample4x4.cpp',
		'sample4x4_blend.cpp',
		'screenspace_general.cpp',
		'sfm_blurfilterx.cpp',
		'sfm_blurfiltery.cpp',
		'sfm_downsample.cpp',
		'sfm_integercombine.cpp',
		'shadow.cpp',
		'shadowbuild_dx9.cpp',
		'shadowmodel_dx9.cpp',
		'shatteredglass.cpp',
		'showz.cpp',
		'skin_dx9_helper.cpp',
		'sky_dx9.cpp',
		'sky_hdr_dx9.cpp',
		'sprite_dx9.cpp',
		'spritecard.cpp',
		'teeth.cpp',
		'TreeLeaf.cpp',
		'unlitgeneric_dx9.cpp',
		'unlittwotexture_dx9.cpp',
		'vertexlitgeneric_dx9.cpp',
		'vertexlitgeneric_dx9_helper.cpp',
		'volume_clouds.cpp',
		'volume_clouds_helper.cpp',
		'vortwarp_dx9.cpp',
		'vr_distort_hud.cpp',
		'vr_distort_texture.cpp',
		'warp.cpp',
		'water.cpp',
		'weapon_sheen_pass_helper.cpp',
		'windowimposter_dx90.cpp',
		'wireframe_dx9.cpp',
		'worldtwotextureblend.cpp',
		'worldvertexalpha.cpp',
		'worldvertextransition.cpp',
		'worldvertextransition_dx8_helper.cpp',
		'writez_dx9.cpp',
		'writestencil_dx9.cpp',
		'eyeball.cpp',
		'blur.cpp',
		'debug_lightingctrl.cpp',
		'debug_radiosity_grid.cpp',
		'debug_shadow.cpp',
		'deferred_brush.cpp',
		'deferred_decalmodulate.cpp',
		'deferred_model.cpp',
		'deferred_utility.cpp',
		'defpass_composite.cpp',
		'defpass_gbuffer.cpp',
		'defpass_shadow.cpp',
		'cdeferredext.cpp',
		'lighting_global.cpp',
		'lighting_pass_basic.cpp',
		'lighting_pass_volum.cpp',
		'lighting_volume.cpp',
		'lighting_world.cpp',
		'radiosity_blend.cpp',
		'radiosity_global.cpp',
		'radiosity_propagate.cpp',
		'screenspace_combine.cpp',
		'screenspace_shading.cpp',
		'volume_blend.cpp',
		'volume_prepass.cpp',
		'../../public/tier0/memoverride.cpp'
	]

	includes = [
		'.',
		'../../public',
		'../../public/tier0',
		'../../public/tier1',
		'fxctmp9',
		'vshtmp9',
		'pshtmp9'
	] + bld.env.INCLUDES_SDL2

	defines = []

	libs = ['tier0','shaderlib','tier1','mathlib']

	if bld.env.DEST_OS == 'android':
		libs += ['ANDROID_SUPPORT']

	install_path = bld.env.LIBDIR

	bld.shlib(
		source   = source,
		target   = PROJECT_NAME,
		name     = PROJECT_NAME,
		features = 'c cxx',
		includes = includes,
		defines  = defines,
		use      = libs,
		install_path = install_path,
		subsystem = bld.env.MSVC_SUBSYSTEM,
		idx      = bld.get_taskgen_count()
	)

